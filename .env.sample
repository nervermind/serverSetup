# ═══════════════════════════════════════════════════════════════════════
# Secure Server Setup Framework - Configuration File
# ═══════════════════════════════════════════════════════════════════════
#
# Copy this file to .env and configure your settings
# cp .env.sample .env
#
# IMPORTANT: Never commit .env to version control!
#

# ───────────────────────────────────────────────────────────────────────
# REQUIRED SETTINGS
# ───────────────────────────────────────────────────────────────────────

# Admin user configuration
ADMIN_USERNAME=admin

# SSH public key for admin user (REQUIRED for SSH access)
# Paste your full SSH public key here (from ~/.ssh/id_rsa.pub or ~/.ssh/id_ed25519.pub)
ADMIN_SSH_KEY="ssh-ed25519 AAAAC3Nz... user@host"

# ───────────────────────────────────────────────────────────────────────
# SSH CONFIGURATION
# ───────────────────────────────────────────────────────────────────────

# SSH port (default: 22)
SSH_PORT=22

# Disable root login after setup? (yes/no)
# WARNING: Make sure admin user SSH key works before setting to 'yes'
DISABLE_ROOT_LOGIN=yes

# ───────────────────────────────────────────────────────────────────────
# REVERSE PROXY CONFIGURATION
# ───────────────────────────────────────────────────────────────────────

# Proxy type: traefik, nginx, or none
PROXY_TYPE=traefik

# Primary domain name (required if using proxy)
DOMAIN=example.com

# Let's Encrypt email for certificate notifications
LETSENCRYPT_EMAIL=admin@example.com

# ───────────────────────────────────────────────────────────────────────
# OPTIONAL SERVICES
# ───────────────────────────────────────────────────────────────────────

# Install Portainer for Docker management? (yes/no)
INSTALL_PORTAINER=yes

# Enable automatic security updates? (yes/no)
ENABLE_AUTO_UPDATES=yes

# ───────────────────────────────────────────────────────────────────────
# BACKUP CONFIGURATION
# ───────────────────────────────────────────────────────────────────────

# Enable automated backups? (yes/no)
ENABLE_BACKUPS=yes

# Backup provider: s3, b2, spaces, or s3-compatible
BACKUP_PROVIDER=s3

# Backup directory (local)
BACKUP_DIR=/opt/backups

# ───────────────────────────────────────────────────────────────────────
# AWS S3 BACKUP CONFIGURATION (if BACKUP_PROVIDER=s3)
# ───────────────────────────────────────────────────────────────────────

AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=us-east-1
AWS_S3_BUCKET=my-server-backups

# ───────────────────────────────────────────────────────────────────────
# BACKBLAZE B2 CONFIGURATION (if BACKUP_PROVIDER=b2)
# ───────────────────────────────────────────────────────────────────────

B2_ACCOUNT_ID=
B2_APPLICATION_KEY=
B2_BUCKET_NAME=

# ───────────────────────────────────────────────────────────────────────
# DIGITALOCEAN SPACES CONFIGURATION (if BACKUP_PROVIDER=spaces)
# ───────────────────────────────────────────────────────────────────────

SPACES_ACCESS_KEY=
SPACES_SECRET_KEY=
SPACES_REGION=nyc3
SPACES_BUCKET=

# ───────────────────────────────────────────────────────────────────────
# S3-COMPATIBLE STORAGE (if BACKUP_PROVIDER=s3-compatible)
# ───────────────────────────────────────────────────────────────────────

S3_ENDPOINT=https://s3.example.com
S3_ACCESS_KEY=
S3_SECRET_KEY=
S3_BUCKET=

# ───────────────────────────────────────────────────────────────────────
# ADVANCED SETTINGS
# ───────────────────────────────────────────────────────────────────────

# Non-interactive mode (skip prompts, use env vars only)
NON_INTERACTIVE=false

# Repository base URL (for script downloads)
# REPO_BASE_URL=https://raw.githubusercontent.com/USERNAME/REPO/main

# ───────────────────────────────────────────────────────────────────────
# MONITORING & ALERTING (Optional)
# ───────────────────────────────────────────────────────────────────────

# Email for system alerts
ALERT_EMAIL=

# Slack webhook URL for notifications
SLACK_WEBHOOK_URL=

# ───────────────────────────────────────────────────────────────────────
# DOCKER CONFIGURATION
# ───────────────────────────────────────────────────────────────────────

# Enable Docker user namespaces (advanced security)
DOCKER_USERNS=false

# Docker log driver (json-file, syslog, journald)
DOCKER_LOG_DRIVER=json-file

# Docker log max size
DOCKER_LOG_MAX_SIZE=10m

# Docker log max files
DOCKER_LOG_MAX_FILE=3

# ───────────────────────────────────────────────────────────────────────
# FIREWALL CONFIGURATION
# ───────────────────────────────────────────────────────────────────────

# Additional ports to allow (comma-separated)
# Example: EXTRA_PORTS="8080/tcp,8443/tcp"
EXTRA_PORTS=

# ───────────────────────────────────────────────────────────────────────
# FAIL2BAN CONFIGURATION
# ───────────────────────────────────────────────────────────────────────

# Ban time in seconds (default: 3600 = 1 hour)
FAIL2BAN_BANTIME=3600

# Find time in seconds (default: 600 = 10 minutes)
FAIL2BAN_FINDTIME=600

# Max retry attempts (default: 3)
FAIL2BAN_MAXRETRY=3

# ═══════════════════════════════════════════════════════════════════════
# END OF CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════
